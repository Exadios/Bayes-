# Bayes++ top level Jamrules

# Set some important global variables if they haven't already been set by the
# user on the command-line or in the environment

# Establish the root of Bayes++
# $(gTOP) is the name of the variable containing the path from the invocation directory to the project root.
BAYES_ROOT = $($(gTOP)) ;

# BOOST_ROOT must be set to the root of the boost installation.
# Bayes++ targets will want $(BOOST_ROOT) and $(BAYES_ROOT) in their #include path.

path-global BOOST_ROOT ;
path-global BAYES_ROOT ;

# Target output in Project Root
ALL_LOCATE_TARGET ?= target ;

# Global optimization control : TODO Make this flags overide work!
# GCC3.2 -ffast-math will fail, inline-limit increases speed slightly at cost of much larger code size
# flags gcc CFLAGS <optimization>speed : "-O3 -fforce-mem -fomit-frame-pointer -foptimize-sibling-calls -finline-functions -finline-limit=5000" ;

# Build variant for full compiler optimization
variant hardoptimize-release : release : 
    <gcc><*><cxxflags>"-fforce-mem -fomit-frame-pointer -foptimize-sibling-calls -finline-limit=2000"
      ;

# Build variant to allow testing with a local uBLAS version seperated from Boost
variant uBLAS-seperate-debug : debug : <include>"../../uBLAS" ;
variant uBLAS-seperate-release : release : <include>"../../uBLAS" ;

# Build variant to allow testing with a local boost_CVS version
variant boost-CVS-debug : debug : <include>"../../boost_CVS"  ;
variant boost-CVS-release : release : <include>"../../boost_CVS" ;

